{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alapc\\\\OneDrive\\\\Documents\\\\Programming\\\\chess\\\\src\\\\Chessboard\\\\Game\\\\Pieces\\\\piece.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport movePiece, { turn } from \"./Logic/Move piece/Move piece\";\nimport nextMovesInclude from \"./Logic/Next moves/Nextmoves include\";\nimport { getNextMove, nextMoves } from \"./Logic/Next moves/NextMoves\";\nimport { clearField } from \"../Indicators/ShowNextMoves\";\nimport startFollowing from \"./Logic/Move piece/Drag and drog pieces/Start motion\";\nimport { gameField } from \"./Gamefield\";\nimport { allStates } from \"../../Restart game\";\nimport { useSelector } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport let recentPieceCrd;\nexport let stateTable = [...Array(8)].map(_ => Array(8).fill(\"0\"));\nexport default function Piece(props) {\n  _s();\n\n  const [piece, setPiece] = useState({\n    x: props.x,\n    y: props.y,\n    name: props.name,\n    initial: {\n      x: props.x,\n      y: props.y,\n      dead: false,\n      name: gameField[props.y][props.x]\n    },\n    dead: false,\n    from: null\n  });\n  if (piece.dead) return;\n  let {\n    x,\n    y,\n    name\n  } = piece;\n\n  if (piece.from) {\n    gameField[piece.from.y][piece.from.x] = \"0\";\n    stateTable[piece.from.y][piece.from.x] = \"0\";\n  }\n\n  gameField[y][x] = name;\n  stateTable[y][x] = setPiece;\n  allStates.push(setPiece);\n  let scales = {\n    \"P\": 0.6,\n    \"B\": 0.8,\n    \"Q\": 0.85,\n    \"K\": 0.8\n  };\n  let marginTop = {\n    \"P\": \"-6px\",\n    \"Q\": \"3px\",\n    \"R\": \"-2px\",\n    \"N\": \"-2px\"\n  };\n  let scale = scales[name[1]] || 0.7;\n  let styles = {\n    top: `${y * 60}px`,\n    left: `${x * 60}px`,\n    transform: `scale(${scale})`,\n    marginTop: marginTop[name[1]]\n  };\n\n  function handleMouseOver(event) {\n    if (name[0] === turn || nextMovesInclude([x, y])) event.target.style.transform = `scale(${scale * 1.2})`;\n  }\n\n  function handleMouseOut(event) {\n    event.target.style.transform = `scale(${scale})`;\n  }\n\n  function handleMouseClick(event) {\n    if (event.button !== 0) return;\n\n    if (name[0] === turn && !nextMovesInclude([x, y])) {\n      getNextMove([x, y], false);\n      recentPieceCrd = [x, y, gameField[y][x], piece, setPiece];\n      nextMoves.length && startFollowing(event);\n    } else if (nextMovesInclude([x, y])) movePiece(x, y);else clearField();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"img\", {\n    src: `./images/${name}.png`,\n    alt: \"failed\",\n    className: \"figure\",\n    style: styles,\n    onMouseOver: handleMouseOver,\n    onMouseOut: handleMouseOut,\n    onMouseDown: handleMouseClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Piece, \"/UAR6QqxsjsVJGI7Yk0UveG1OdY=\");\n\n_c = Piece;\n\nvar _c;\n\n$RefreshReg$(_c, \"Piece\");","map":{"version":3,"names":["useState","movePiece","turn","nextMovesInclude","getNextMove","nextMoves","clearField","startFollowing","gameField","allStates","useSelector","recentPieceCrd","stateTable","Array","map","_","fill","Piece","props","piece","setPiece","x","y","name","initial","dead","from","push","scales","marginTop","scale","styles","top","left","transform","handleMouseOver","event","target","style","handleMouseOut","handleMouseClick","button","length"],"sources":["C:/Users/alapc/OneDrive/Documents/Programming/chess/src/Chessboard/Game/Pieces/piece.js"],"sourcesContent":["import {useState} from \"react\";\r\nimport movePiece, {turn} from \"./Logic/Move piece/Move piece\";\r\nimport nextMovesInclude from \"./Logic/Next moves/Nextmoves include\";\r\nimport {getNextMove, nextMoves} from \"./Logic/Next moves/NextMoves\";\r\nimport {clearField} from \"../Indicators/ShowNextMoves\";\r\nimport startFollowing from \"./Logic/Move piece/Drag and drog pieces/Start motion\";\r\nimport {gameField} from \"./Gamefield\";\r\nimport {allStates} from \"../../Restart game\";\r\nimport { useSelector } from 'react-redux';\r\nexport let recentPieceCrd\r\nexport let stateTable = [...Array(8)].map(_ => Array(8).fill(\"0\"))\r\n\r\nexport default function Piece(props) {\r\n\r\n    const [piece, setPiece] = useState({\r\n        x: props.x,\r\n        y: props.y,\r\n        name: props.name,\r\n        initial: {\r\n            x: props.x,\r\n            y: props.y,\r\n            dead: false,\r\n            name: gameField[props.y][props.x]},\r\n        dead: false,\r\n        from: null\r\n    })\r\n\r\n\r\n    if (piece.dead) return\r\n\r\n    let {x, y, name} = piece\r\n\r\n    if (piece.from) {\r\n        gameField[piece.from.y][piece.from.x] = \"0\"\r\n        stateTable[piece.from.y][piece.from.x] = \"0\"\r\n    }\r\n\r\n    gameField[y][x] = name\r\n    stateTable[y][x] = setPiece\r\n\r\n    allStates.push(setPiece)\r\n\r\n    let scales = {\r\n        \"P\": 0.6, \"B\": 0.8,\r\n        \"Q\": 0.85, \"K\": 0.8,\r\n    }\r\n\r\n    let marginTop = {\r\n        \"P\": \"-6px\", \"Q\": \"3px\",\r\n        \"R\": \"-2px\", \"N\": \"-2px\",\r\n    }\r\n\r\n    let scale = scales[name[1]] || 0.7\r\n\r\n    let styles = {\r\n        top: `${y * 60}px`,\r\n        left: `${x * 60}px`,\r\n        transform: `scale(${scale})`,\r\n        marginTop: marginTop[name[1]],\r\n    }\r\n\r\n    function handleMouseOver(event) {\r\n\r\n        if (name[0] === turn || nextMovesInclude([x,y]))\r\n            event.target.style.transform = `scale(${scale * 1.2})`\r\n    }\r\n\r\n    function handleMouseOut(event) {\r\n        event.target.style.transform = `scale(${scale})`\r\n    }\r\n\r\n    function handleMouseClick(event){\r\n\r\n        if (event.button !== 0) return\r\n\r\n        if (name[0] === turn && !nextMovesInclude([x,y])) {\r\n            getNextMove([x,y], false)\r\n            recentPieceCrd = [x, y, gameField[y][x], piece, setPiece]\r\n            nextMoves.length && startFollowing(event)\r\n        }\r\n\r\n        else if (nextMovesInclude([x,y]))\r\n            movePiece(x, y)\r\n\r\n        else clearField()\r\n\r\n    }\r\n\r\n    return (\r\n        <img\r\n            src={`./images/${name}.png`}\r\n            alt={\"failed\"}\r\n            className={\"figure\"}\r\n            style={styles}\r\n            onMouseOver={handleMouseOver}\r\n            onMouseOut={handleMouseOut}\r\n            onMouseDown={handleMouseClick}>\r\n        </img>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}