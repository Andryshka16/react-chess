{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useSelector } from 'react-redux';\nimport { turns } from \"../Move piece/Move piece\";\nexport let checkCRD = [];\nexport default function useCheckForChecks(_ref) {\n  _s();\n\n  let [a, b] = _ref;\n  let color = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : turns[turn];\n  return function () {\n    const {\n      gameField,\n      turn\n    } = useSelector(store => store.chess);\n    let check = 0;\n\n    function checkCell(_ref2, piece, i) {\n      let [x, y] = _ref2;\n      let name = gameField[y][x];\n\n      if (name !== \"0\" && name !== turns[color] + \"K\") {\n        if (name === color + \"K\" && Math.abs(i) === 1) {\n          checkCRD = [x, y];\n          check += 1;\n        } else if (name === color + \"Q\" || name === color + piece) {\n          checkCRD = [x, y];\n          check += 1;\n        } else if (piece === \"B\" && name === color + \"P\" && (color === \"w\" ? 1 : -1) === i) {\n          checkCRD = [x, y];\n          check += 1;\n        }\n\n        return true;\n      }\n    } // Rook check\n\n\n    for (let i = 1; a + i < 8; i++) {\n      if (checkCell([a + i, b], \"R\", i)) {\n        break;\n      }\n    }\n\n    for (let i = 1; a - i >= 0; i++) {\n      if (checkCell([a - i, b], \"R\", i)) {\n        break;\n      }\n    }\n\n    for (let i = 1; b + i < 8; i++) {\n      if (checkCell([a, b + i], \"R\", i)) {\n        break;\n      }\n    }\n\n    for (let i = 1; b - i >= 0; i++) {\n      if (checkCell([a, b - i], \"R\", i)) {\n        break;\n      }\n    } // Bishop check\n\n\n    for (let i = 1; a + i < 8 && b + i < 8; i++) {\n      if (checkCell([a + i, b + i], \"B\", i)) {\n        break;\n      }\n    }\n\n    for (let i = 1; a - i >= 0 && b - i >= 0; i++) {\n      if (checkCell([a - i, b - i], \"B\", -i)) {\n        break;\n      }\n    }\n\n    for (let i = 1; b + i < 8 && a - i >= 0; i++) {\n      if (checkCell([a - i, b + i], \"B\", i)) {\n        break;\n      }\n    }\n\n    for (let i = 1; b - i >= 0 && a + i < 8; i++) {\n      if (checkCell([a + i, b - i], \"B\", -i)) {\n        break;\n      }\n    }\n\n    let knights = [[a - 2, b - 1], [a - 1, b + 2], [a - 2, b + 1], [a + 1, b + 2], [a + 2, b - 1], [a - 1, b - 2], [a + 2, b + 1], [a + 1, b - 2]];\n    knights = knights.filter(_ref3 => {\n      let [x, y] = _ref3;\n      return x >= 0 && x < 8 && y >= 0 && y < 8 && gameField[y][x][0] !== turn;\n    });\n    knights.forEach(_ref4 => {\n      let [x, y] = _ref4;\n\n      if (gameField[y][x][1] === \"N\") {\n        checkCRD = [x, y];\n        check += 1;\n      }\n    });\n    return check;\n  }();\n}\n\n_s(useCheckForChecks, \"GEAfwGRX/IsujsZTEu83nh59zs8=\", false, function () {\n  return [useSelector];\n});","map":{"version":3,"names":["useSelector","turns","checkCRD","useCheckForChecks","a","b","color","turn","gameField","store","chess","check","checkCell","piece","i","x","y","name","Math","abs","knights","filter","forEach"],"sources":["C:/Users/alapc/OneDrive/Documents/Programming/chess/src/Chessboard/Game/Pieces/Logic/King activity/Checks.js"],"sourcesContent":["import { useSelector } from 'react-redux';\r\nimport {turns} from \"../Move piece/Move piece\";\r\nexport let checkCRD = []\r\n\r\nexport default function useCheckForChecks([a,b], color=turns[turn]){\r\n\r\n    const {gameField, turn} = useSelector(store=>store.chess)\r\n\r\n    let check = 0\r\n\r\n    function checkCell([x,y], piece, i) {\r\n\r\n        let name = gameField[y][x]\r\n\r\n        if (name !== \"0\" && name !== turns[color] + \"K\") {\r\n\r\n            if (name === color + \"K\" && Math.abs(i) === 1) {\r\n                checkCRD = [x, y]\r\n                check += 1\r\n            }\r\n\r\n            else if (name === color + \"Q\" || name === color + piece) {\r\n                checkCRD = [x, y]\r\n                check += 1\r\n            }\r\n\r\n            else if (piece === \"B\" && name === color + \"P\"\r\n                && (color === \"w\"? 1 : -1) === i) {\r\n                checkCRD = [x, y]\r\n                check += 1\r\n            }\r\n\r\n            return true\r\n        }\r\n    }\r\n\r\n    // Rook check\r\n\r\n    for (let i = 1; a + i < 8; i++){\r\n        if(checkCell([a + i, b],\"R\", i)){\r\n            break\r\n        }\r\n    }\r\n    for (let i = 1; a - i >=  0; i++) {\r\n        if(checkCell([a - i, b],\"R\", i)){\r\n            break\r\n        }\r\n    }\r\n    for (let i = 1; b + i < 8; i++){\r\n        if(checkCell([a, b + i],\"R\", i)){\r\n            break\r\n        }\r\n    }\r\n    for (let i = 1; b - i >= 0; i++){\r\n        if(checkCell([a, b - i],\"R\", i)){\r\n            break\r\n        }\r\n    }\r\n\r\n    // Bishop check\r\n\r\n    for (let i = 1; a + i < 8 && b + i < 8; i++){\r\n        if(checkCell([a + i, b + i],\"B\", i)){\r\n            break\r\n        }\r\n    }\r\n    for (let i = 1; a - i >= 0 && b - i >= 0; i++){\r\n        if(checkCell([a - i, b - i],\"B\", -i)){\r\n            break\r\n        }\r\n    }\r\n    for (let i = 1; b + i < 8 && a - i >= 0; i++){\r\n        if(checkCell([a - i, b + i],\"B\", i)){\r\n            break\r\n        }\r\n    }\r\n    for (let i = 1; b - i >= 0 && a + i < 8; i++){\r\n        if(checkCell([a + i, b - i],\"B\", -i)){\r\n            break\r\n        }\r\n    }\r\n\r\n    let knights = [\r\n      [ a - 2, b - 1 ],  [ a - 1, b + 2 ],\r\n      [ a - 2, b + 1 ],  [ a + 1, b + 2 ],\r\n      [ a + 2, b - 1 ],  [ a - 1, b - 2 ],\r\n      [ a + 2, b + 1 ],  [ a + 1, b - 2 ]\r\n    ]\r\n\r\n    knights = knights.filter(([x,y])=>\r\n        x >= 0 && x < 8 &&\r\n        y >= 0 && y < 8 &&\r\n        gameField[y][x][0] !== turn\r\n    )\r\n\r\n    knights.forEach(([x,y])=>{\r\n        if (gameField[y][x][1] === \"N\"){\r\n            checkCRD = [x,y]\r\n            check += 1\r\n        }\r\n    })\r\n\r\n    return check\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}