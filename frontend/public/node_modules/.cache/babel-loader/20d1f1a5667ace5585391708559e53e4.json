{"ast":null,"code":"export let kingEscape = [];\nexport default function useCheckMate(king, check) {\n  let [x1, y1] = king;\n  let [x2, y2] = check;\n  kingEscape = [...getNextMove([x1, y1], true)];\n\n  if (checkForChecks([x1, y1]) > 1) {\n    if (kingEscape.length) {\n      coverMoves.push(\"Double mate\");\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  let xK = x1 === x2 ? 0 : 1;\n  let yK = y1 === y2 ? 0 : 1;\n\n  if (gameField[y2][x2][1] !== \"N\") {\n    for (let i = 1; i * xK + Math.min(x1, x2) < Math.max(x1, x2) || i * yK + Math.min(y1, y2) < Math.max(y1, y2); i++) {\n      coverMoves.push([x1 + (x1 < x2 ? i : -i) * xK, y1 + (y1 < y2 ? i : -i) * yK]);\n    }\n  }\n\n  coverMoves.push([x2, y2]);\n\n  for (let y = 0; y < 8; y++) {\n    for (let x = 0; x < 8; x++) {\n      let piece = gameField[y][x];\n\n      if (piece[0] === turn && getNextMove([x, y], true).length) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}","map":{"version":3,"names":["kingEscape","useCheckMate","king","check","x1","y1","x2","y2","getNextMove","checkForChecks","length","coverMoves","push","xK","yK","gameField","i","Math","min","max","y","x","piece","turn"],"sources":["C:/Users/alapc/OneDrive/Documents/Programming/chess/src/Chessboard/Game/Pieces/Logic/King activity/Mate.js"],"sourcesContent":["\r\nexport let kingEscape = []\r\n\r\nexport default function useCheckMate(king, check) {\r\n\r\n    let [x1, y1] = king\r\n    let [x2, y2] = check\r\n\r\n    kingEscape = [...getNextMove([x1, y1], true)]\r\n\r\n    if (checkForChecks([x1,y1]) > 1){\r\n\r\n        if (kingEscape.length) {\r\n            coverMoves.push(\"Double mate\")\r\n            return false\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n\r\n    let xK = x1===x2? 0: 1\r\n    let yK = y1===y2? 0: 1\r\n\r\n    if (gameField[y2][x2][1] !== \"N\"){\r\n\r\n        for (let i = 1; i * xK + Math.min(x1, x2) < Math.max(x1, x2) ||\r\n                        i * yK + Math.min(y1, y2) < Math.max(y1, y2); i++){\r\n\r\n            coverMoves.push([\r\n                x1 + (x1 < x2 ? i: -i) * xK,\r\n                y1 + (y1 < y2 ? i: -i) * yK\r\n                ]\r\n            )\r\n        }\r\n    }\r\n    coverMoves.push([x2,y2])\r\n\r\n    for (let y = 0; y < 8; y++){\r\n        for (let x = 0; x < 8; x++){\r\n\r\n            let piece = gameField[y][x]\r\n            if (piece[0] === turn && getNextMove([x,y],true).length){\r\n                return false\r\n            }\r\n        }\r\n    }\r\n\r\n    return true\r\n}"],"mappings":"AACA,OAAO,IAAIA,UAAU,GAAG,EAAjB;AAEP,eAAe,SAASC,YAAT,CAAsBC,IAAtB,EAA4BC,KAA5B,EAAmC;EAE9C,IAAI,CAACC,EAAD,EAAKC,EAAL,IAAWH,IAAf;EACA,IAAI,CAACI,EAAD,EAAKC,EAAL,IAAWJ,KAAf;EAEAH,UAAU,GAAG,CAAC,GAAGQ,WAAW,CAAC,CAACJ,EAAD,EAAKC,EAAL,CAAD,EAAW,IAAX,CAAf,CAAb;;EAEA,IAAII,cAAc,CAAC,CAACL,EAAD,EAAIC,EAAJ,CAAD,CAAd,GAA0B,CAA9B,EAAgC;IAE5B,IAAIL,UAAU,CAACU,MAAf,EAAuB;MACnBC,UAAU,CAACC,IAAX,CAAgB,aAAhB;MACA,OAAO,KAAP;IACH,CAHD,MAIK;MACD,OAAO,IAAP;IACH;EACJ;;EAED,IAAIC,EAAE,GAAGT,EAAE,KAAGE,EAAL,GAAS,CAAT,GAAY,CAArB;EACA,IAAIQ,EAAE,GAAGT,EAAE,KAAGE,EAAL,GAAS,CAAT,GAAY,CAArB;;EAEA,IAAIQ,SAAS,CAACR,EAAD,CAAT,CAAcD,EAAd,EAAkB,CAAlB,MAAyB,GAA7B,EAAiC;IAE7B,KAAK,IAAIU,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,EAAJ,GAASI,IAAI,CAACC,GAAL,CAASd,EAAT,EAAaE,EAAb,CAAT,GAA4BW,IAAI,CAACE,GAAL,CAASf,EAAT,EAAaE,EAAb,CAA5B,IACAU,CAAC,GAAGF,EAAJ,GAASG,IAAI,CAACC,GAAL,CAASb,EAAT,EAAaE,EAAb,CAAT,GAA4BU,IAAI,CAACE,GAAL,CAASd,EAAT,EAAaE,EAAb,CAD5C,EAC8DS,CAAC,EAD/D,EACkE;MAE9DL,UAAU,CAACC,IAAX,CAAgB,CACZR,EAAE,GAAG,CAACA,EAAE,GAAGE,EAAL,GAAUU,CAAV,GAAa,CAACA,CAAf,IAAoBH,EADb,EAEZR,EAAE,GAAG,CAACA,EAAE,GAAGE,EAAL,GAAUS,CAAV,GAAa,CAACA,CAAf,IAAoBF,EAFb,CAAhB;IAKH;EACJ;;EACDH,UAAU,CAACC,IAAX,CAAgB,CAACN,EAAD,EAAIC,EAAJ,CAAhB;;EAEA,KAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA2B;IACvB,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA2B;MAEvB,IAAIC,KAAK,GAAGP,SAAS,CAACK,CAAD,CAAT,CAAaC,CAAb,CAAZ;;MACA,IAAIC,KAAK,CAAC,CAAD,CAAL,KAAaC,IAAb,IAAqBf,WAAW,CAAC,CAACa,CAAD,EAAGD,CAAH,CAAD,EAAO,IAAP,CAAX,CAAwBV,MAAjD,EAAwD;QACpD,OAAO,KAAP;MACH;IACJ;EACJ;;EAED,OAAO,IAAP;AACH"},"metadata":{},"sourceType":"module"}