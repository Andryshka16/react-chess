{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { turns } from '../Move piece/Move piece';\nimport useKingCoordinates from '../King activity/King coordinates';\nimport { useSelector } from 'react-redux';\nexport default function usePieceIsPinned() {\n  _s();\n\n  const {\n    gameField,\n    turn\n  } = useSelector(store => store.chess);\n  let [x2, y2] = useKingCoordinates(turn + 'K');\n  return piece => {\n    let [x1, y1] = piece;\n    let pinK = true;\n    let pinF = false;\n\n    if ((x1 === x2 || y1 === y2 || Math.abs(x2 - x1) === Math.abs(y2 - y1)) && !(x1 === x2 && y1 === y2)) {\n      let kX = x1 > x2 ? -1 : x1 < x2 ? 1 : 0;\n      let kY = y1 > y2 ? -1 : y1 < y2 ? 1 : 0;\n\n      for (let i = 1; i * kX + x1 !== x2 || i * kY + y1 !== y2; i++) {\n        if (gameField[y1 + i * kY][x1 + i * kX] !== '0') {\n          pinK = false;\n          break;\n        }\n      }\n\n      let color = turns[turn];\n\n      for (let i = 1; i * -kX + x1 < 8 && i * -kX + x1 >= 0 && i * -kY + y1 < 8 && i * -kY + y1 >= 0; i++) {\n        let [x, y] = [x1 + i * -kX, y1 + i * -kY];\n        let piece = gameField[y][x];\n\n        if (color + 'Q' === piece) {\n          pinF = true;\n        } else if (color + 'R' === piece && (kX === 0 || kY === 0)) {\n          pinF = true;\n        } else if (color + 'B' === piece && kX !== 0 && kY !== 0) {\n          pinF = true;\n        }\n\n        if (piece !== '0') break;\n      }\n    }\n\n    return pinF && pinK;\n  };\n}\n\n_s(usePieceIsPinned, \"2wt3lZnihDx6GNjVNFg3r99zKlc=\", false, function () {\n  return [useSelector, useKingCoordinates];\n});","map":{"version":3,"names":["turns","useKingCoordinates","useSelector","usePieceIsPinned","gameField","turn","store","chess","x2","y2","piece","x1","y1","pinK","pinF","Math","abs","kX","kY","i","color","x","y"],"sources":["C:/Users/alapc/OneDrive/Documents/Programming/chess/src/Chessboard/Chess/Pieces/Logic/Next moves/Check for pin.js"],"sourcesContent":["import { turns } from '../Move piece/Move piece'\r\nimport useKingCoordinates from '../King activity/King coordinates'\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport default function usePieceIsPinned() {\r\n\tconst { gameField, turn } = useSelector((store) => store.chess)\r\n\tlet [x2, y2] = useKingCoordinates(turn + 'K')\r\n\r\n\treturn (piece) => {\r\n\t\tlet [x1, y1] = piece\r\n\t\tlet pinK = true\r\n\t\tlet pinF = false\r\n\r\n\t\tif (\r\n\t\t\t(x1 === x2 ||\r\n\t\t\t\ty1 === y2 ||\r\n\t\t\t\tMath.abs(x2 - x1) === Math.abs(y2 - y1)) &&\r\n\t\t\t!(x1 === x2 && y1 === y2)\r\n\t\t) {\r\n\t\t\tlet kX = x1 > x2 ? -1 : x1 < x2 ? 1 : 0\r\n\t\t\tlet kY = y1 > y2 ? -1 : y1 < y2 ? 1 : 0\r\n\r\n\t\t\tfor (let i = 1; i * kX + x1 !== x2 || i * kY + y1 !== y2; i++) {\r\n\t\t\t\tif (gameField[y1 + i * kY][x1 + i * kX] !== '0') {\r\n\t\t\t\t\tpinK = false\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet color = turns[turn]\r\n\r\n\t\t\tfor (\r\n\t\t\t\tlet i = 1;\r\n\t\t\t\ti * -kX + x1 < 8 &&\r\n\t\t\t\ti * -kX + x1 >= 0 &&\r\n\t\t\t\ti * -kY + y1 < 8 &&\r\n\t\t\t\ti * -kY + y1 >= 0;\r\n\t\t\t\ti++\r\n\t\t\t) {\r\n\t\t\t\tlet [x, y] = [x1 + i * -kX, y1 + i * -kY]\r\n\t\t\t\tlet piece = gameField[y][x]\r\n\r\n\t\t\t\tif (color + 'Q' === piece) {\r\n\t\t\t\t\tpinF = true\r\n\t\t\t\t} else if (color + 'R' === piece && (kX === 0 || kY === 0)) {\r\n\t\t\t\t\tpinF = true\r\n\t\t\t\t} else if (color + 'B' === piece && kX !== 0 && kY !== 0) {\r\n\t\t\t\t\tpinF = true\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (piece !== '0') break\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn pinF && pinK\r\n\t}\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}