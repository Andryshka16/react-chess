{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useDispatch } from 'react-redux';\nimport useGetNextMoves from '../Next moves/NextMoves';\nexport let kingEscape = [];\nexport default function useCheckMate() {\n  _s();\n\n  const dispatch = useDispatch();\n  const getNextMoves = useGetNextMoves();\n  return (king, check, amount) => {\n    let [x1, y1] = king;\n    let [x2, y2] = check;\n    kingEscape = [...getNextMoves([x1, y1])];\n\n    if (amount > 1) {\n      if (!kingEscape.length) {\n        coverMoves.push('Double mate');\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    let xK = x1 === x2 ? 0 : 1;\n    let yK = y1 === y2 ? 0 : 1;\n\n    if (gameField[y2][x2][1] !== 'N') {\n      for (let i = 1; i * xK + Math.min(x1, x2) < Math.max(x1, x2) || i * yK + Math.min(y1, y2) < Math.max(y1, y2); i++) {\n        coverMoves.push([x1 + (x1 < x2 ? i : -i) * xK, y1 + (y1 < y2 ? i : -i) * yK]);\n      }\n    }\n\n    coverMoves.push([x2, y2]);\n\n    for (let y = 0; y < 8; y++) {\n      for (let x = 0; x < 8; x++) {\n        let piece = gameField[y][x];\n\n        if (piece[0] === turn && getNextMove([x, y], true).length) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n}\n\n_s(useCheckMate, \"AAjVd59XDJrehw2JX4j9rwBTx3U=\", false, function () {\n  return [useDispatch, useGetNextMoves];\n});","map":{"version":3,"names":["useDispatch","useGetNextMoves","kingEscape","useCheckMate","dispatch","getNextMoves","king","check","amount","x1","y1","x2","y2","length","coverMoves","push","xK","yK","gameField","i","Math","min","max","y","x","piece","turn","getNextMove"],"sources":["C:/Users/alapc/OneDrive/Documents/Programming/chess/src/Chessboard/Game/Pieces/Logic/King activity/Mate.js"],"sourcesContent":["import { useDispatch } from 'react-redux'\r\nimport useGetNextMoves from '../Next moves/NextMoves'\r\n\r\nexport let kingEscape = []\r\n\r\nexport default function useCheckMate() {\r\n\tconst dispatch = useDispatch()\r\n\tconst getNextMoves = useGetNextMoves()\r\n\r\n    return (king, check, amount) => {\r\n        \r\n\t\tlet [x1, y1] = king\r\n\t\tlet [x2, y2] = check\r\n\r\n\t\tkingEscape = [...getNextMoves([x1, y1])]\r\n\r\n\t\tif (amount > 1) {\r\n\t\t\tif (!kingEscape.length) {\r\n\t\t\t\tcoverMoves.push('Double mate')\r\n\t\t\t\treturn true\r\n\t\t\t} else {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet xK = x1 === x2 ? 0 : 1\r\n\t\tlet yK = y1 === y2 ? 0 : 1\r\n\r\n\t\tif (gameField[y2][x2][1] !== 'N') {\r\n\t\t\tfor (\r\n\t\t\t\tlet i = 1;\r\n\t\t\t\ti * xK + Math.min(x1, x2) < Math.max(x1, x2) ||\r\n\t\t\t\ti * yK + Math.min(y1, y2) < Math.max(y1, y2);\r\n\t\t\t\ti++\r\n\t\t\t) {\r\n\t\t\t\tcoverMoves.push([\r\n\t\t\t\t\tx1 + (x1 < x2 ? i : -i) * xK,\r\n\t\t\t\t\ty1 + (y1 < y2 ? i : -i) * yK,\r\n\t\t\t\t])\r\n\t\t\t}\r\n\t\t}\r\n\t\tcoverMoves.push([x2, y2])\r\n\r\n\t\tfor (let y = 0; y < 8; y++) {\r\n\t\t\tfor (let x = 0; x < 8; x++) {\r\n\t\t\t\tlet piece = gameField[y][x]\r\n\t\t\t\tif (piece[0] === turn && getNextMove([x, y], true).length) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true\r\n\t}\r\n}\r\n"],"mappings":";;AAAA,SAASA,WAAT,QAA4B,aAA5B;AACA,OAAOC,eAAP,MAA4B,yBAA5B;AAEA,OAAO,IAAIC,UAAU,GAAG,EAAjB;AAEP,eAAe,SAASC,YAAT,GAAwB;EAAA;;EACtC,MAAMC,QAAQ,GAAGJ,WAAW,EAA5B;EACA,MAAMK,YAAY,GAAGJ,eAAe,EAApC;EAEG,OAAO,CAACK,IAAD,EAAOC,KAAP,EAAcC,MAAd,KAAyB;IAElC,IAAI,CAACC,EAAD,EAAKC,EAAL,IAAWJ,IAAf;IACA,IAAI,CAACK,EAAD,EAAKC,EAAL,IAAWL,KAAf;IAEAL,UAAU,GAAG,CAAC,GAAGG,YAAY,CAAC,CAACI,EAAD,EAAKC,EAAL,CAAD,CAAhB,CAAb;;IAEA,IAAIF,MAAM,GAAG,CAAb,EAAgB;MACf,IAAI,CAACN,UAAU,CAACW,MAAhB,EAAwB;QACvBC,UAAU,CAACC,IAAX,CAAgB,aAAhB;QACA,OAAO,IAAP;MACA,CAHD,MAGO;QACN,OAAO,KAAP;MACA;IACD;;IAED,IAAIC,EAAE,GAAGP,EAAE,KAAKE,EAAP,GAAY,CAAZ,GAAgB,CAAzB;IACA,IAAIM,EAAE,GAAGP,EAAE,KAAKE,EAAP,GAAY,CAAZ,GAAgB,CAAzB;;IAEA,IAAIM,SAAS,CAACN,EAAD,CAAT,CAAcD,EAAd,EAAkB,CAAlB,MAAyB,GAA7B,EAAkC;MACjC,KACC,IAAIQ,CAAC,GAAG,CADT,EAECA,CAAC,GAAGH,EAAJ,GAASI,IAAI,CAACC,GAAL,CAASZ,EAAT,EAAaE,EAAb,CAAT,GAA4BS,IAAI,CAACE,GAAL,CAASb,EAAT,EAAaE,EAAb,CAA5B,IACAQ,CAAC,GAAGF,EAAJ,GAASG,IAAI,CAACC,GAAL,CAASX,EAAT,EAAaE,EAAb,CAAT,GAA4BQ,IAAI,CAACE,GAAL,CAASZ,EAAT,EAAaE,EAAb,CAH7B,EAICO,CAAC,EAJF,EAKE;QACDL,UAAU,CAACC,IAAX,CAAgB,CACfN,EAAE,GAAG,CAACA,EAAE,GAAGE,EAAL,GAAUQ,CAAV,GAAc,CAACA,CAAhB,IAAqBH,EADX,EAEfN,EAAE,GAAG,CAACA,EAAE,GAAGE,EAAL,GAAUO,CAAV,GAAc,CAACA,CAAhB,IAAqBF,EAFX,CAAhB;MAIA;IACD;;IACDH,UAAU,CAACC,IAAX,CAAgB,CAACJ,EAAD,EAAKC,EAAL,CAAhB;;IAEA,KAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;MAC3B,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;QAC3B,IAAIC,KAAK,GAAGP,SAAS,CAACK,CAAD,CAAT,CAAaC,CAAb,CAAZ;;QACA,IAAIC,KAAK,CAAC,CAAD,CAAL,KAAaC,IAAb,IAAqBC,WAAW,CAAC,CAACH,CAAD,EAAID,CAAJ,CAAD,EAAS,IAAT,CAAX,CAA0BV,MAAnD,EAA2D;UAC1D,OAAO,KAAP;QACA;MACD;IACD;;IAED,OAAO,IAAP;EACA,CA5CE;AA6CH;;GAjDuBV,Y;UACNH,W,EACIC,e"},"metadata":{},"sourceType":"module"}