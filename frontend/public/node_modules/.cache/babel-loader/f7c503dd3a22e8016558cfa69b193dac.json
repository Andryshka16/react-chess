{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alapc\\\\OneDrive\\\\Documents\\\\Programming\\\\chess\\\\src\\\\Components\\\\Chessboard\\\\Components\\\\Pieces\\\\piece.js\",\n    _s = $RefreshSig$();\n\nimport { useNextMovesInclude } from './Logic/Next moves/NextMoves';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { movePiece, setNextMoves, setSelected } from '../../../../features/chess/chessSlice';\nimport useGetNextMoves from './Logic/Next moves/NextMoves';\nimport useStartDragging from './Start dragging';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Piece(_ref) {\n  _s();\n\n  let {\n    x,\n    y\n  } = _ref;\n  const {\n    gameField,\n    turn\n  } = useSelector(store => store.chess);\n  const dispatch = useDispatch();\n  const getNextMoves = useGetNextMoves();\n  const nextMovesArray = getNextMoves(x, y);\n  const startFollowing = useStartDragging(nextMovesArray, x, y);\n  const nextMovesInclude = useNextMovesInclude();\n  const name = gameField[y][x];\n  let scales = {\n    P: 0.6,\n    B: 0.8,\n    Q: 0.85,\n    K: 0.8\n  };\n  let marginTop = {\n    P: '-8px',\n    Q: '3px',\n    R: '-3px',\n    N: '-3px'\n  };\n  let scale = scales[name[1]] || 0.7;\n  let styles = {\n    top: `${y * 80}px`,\n    left: `${x * 80}px`,\n    transform: `scale(${scale})`,\n    marginTop: marginTop[name[1]],\n    pointerEvents: nextMovesArray.length ? \"all\" : \"none\"\n  };\n\n  function handleMouseOver(event) {\n    if (name[0] === turn || nextMovesInclude([x, y])) event.target.style.transform = `scale(${scale * 1.2})`;\n  }\n\n  function handleMouseOut(event) {\n    event.target.style.transform = `scale(${scale})`;\n  }\n\n  function handleMouseClick(event) {\n    if (event.button !== 0) return;\n\n    if (name[0] === turn && !nextMovesInclude([x, y])) {\n      dispatch(setNextMoves(nextMovesArray));\n      dispatch(setSelected({\n        x1: x,\n        y1: y,\n        name\n      }));\n      if (nextMovesArray.length) startFollowing(event);\n    } else if (nextMovesInclude([x, y])) {\n      dispatch(movePiece([x, y]));\n    } else {\n      dispatch(setNextMoves([]));\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"img\", {\n    src: `./images/${name}.png`,\n    alt: 'failed',\n    className: 'piece',\n    style: styles,\n    onMouseOver: handleMouseOver,\n    onMouseOut: handleMouseOut,\n    onMouseDown: handleMouseClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Piece, \"WFnSUOLZlUHpP56IrBUmclg3IwU=\", false, function () {\n  return [useSelector, useDispatch, useGetNextMoves, useStartDragging, useNextMovesInclude];\n});\n\n_c = Piece;\n\nvar _c;\n\n$RefreshReg$(_c, \"Piece\");","map":{"version":3,"names":["useNextMovesInclude","useDispatch","useSelector","movePiece","setNextMoves","setSelected","useGetNextMoves","useStartDragging","Piece","x","y","gameField","turn","store","chess","dispatch","getNextMoves","nextMovesArray","startFollowing","nextMovesInclude","name","scales","P","B","Q","K","marginTop","R","N","scale","styles","top","left","transform","pointerEvents","length","handleMouseOver","event","target","style","handleMouseOut","handleMouseClick","button","x1","y1"],"sources":["C:/Users/alapc/OneDrive/Documents/Programming/chess/src/Components/Chessboard/Components/Pieces/piece.js"],"sourcesContent":["import { useNextMovesInclude } from './Logic/Next moves/NextMoves'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport {\r\n    movePiece,\r\n    setNextMoves,\r\n    setSelected\r\n} from '../../../../features/chess/chessSlice'\r\nimport useGetNextMoves from './Logic/Next moves/NextMoves'\r\nimport useStartDragging from './Start dragging'\r\n\r\nexport default function Piece({ x, y }) {\r\n\tconst { gameField, turn } = useSelector((store) => store.chess)\r\n\tconst dispatch = useDispatch()\r\n\tconst getNextMoves = useGetNextMoves()\r\n\tconst nextMovesArray = getNextMoves(x, y)\r\n\tconst startFollowing = useStartDragging(nextMovesArray, x, y)\r\n\tconst nextMovesInclude = useNextMovesInclude()\r\n\r\n\tconst name = gameField[y][x]\r\n\r\n\tlet scales = {\r\n\t\tP: 0.6,\r\n\t\tB: 0.8,\r\n\t\tQ: 0.85,\r\n\t\tK: 0.8,\r\n\t}\r\n\r\n\tlet marginTop = {\r\n\t\tP: '-8px',\r\n\t\tQ: '3px',\r\n\t\tR: '-3px',\r\n\t\tN: '-3px',\r\n\t}\r\n\r\n\tlet scale = scales[name[1]] || 0.7\r\n\r\n\tlet styles = {\r\n\t\ttop: `${y * 80}px`,\r\n\t\tleft: `${x * 80}px`,\r\n\t\ttransform: `scale(${scale})`,\r\n\t\tmarginTop: marginTop[name[1]],\r\n\t\tpointerEvents: nextMovesArray.length ? \"all\": \"none\"\r\n\t}\r\n\r\n\tfunction handleMouseOver(event) {\r\n\t\tif (name[0] === turn || nextMovesInclude([x, y]))\r\n\t\t\tevent.target.style.transform = `scale(${scale * 1.2})`\r\n\t}\r\n\r\n\tfunction handleMouseOut(event) {\r\n\t\tevent.target.style.transform = `scale(${scale})`\r\n\t}\r\n\r\n\tfunction handleMouseClick(event) {\r\n\t\tif (event.button !== 0) return\r\n\r\n\t\tif (name[0] === turn && !nextMovesInclude([x, y])) {\r\n\t\t\tdispatch(setNextMoves(nextMovesArray))\r\n\t\t\tdispatch(setSelected({ x1: x, y1: y, name }))\r\n\t\t\tif (nextMovesArray.length) startFollowing(event)\r\n\t\t} else if (nextMovesInclude([x, y])) {\r\n\t\t\tdispatch(movePiece([x, y]))\r\n\t\t} else {\r\n\t\t\tdispatch(setNextMoves([]))\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<img\r\n\t\t\tsrc={`./images/${name}.png`}\r\n\t\t\talt={'failed'}\r\n\t\t\tclassName={'piece'}\r\n\t\t\tstyle={styles}\r\n\t\t\tonMouseOver={handleMouseOver}\r\n\t\t\tonMouseOut={handleMouseOut}\r\n\t\t\tonMouseDown={handleMouseClick}\r\n\t\t></img>\r\n\t)\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}