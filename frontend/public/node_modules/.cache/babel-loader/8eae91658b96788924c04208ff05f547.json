{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { turns } from '../Move piece/Move piece';\nimport useKingCoordinates from '../King activity/Find king';\nimport { useSelector } from 'react-redux';\nexport default function usePieceIsPinned() {\n  _s();\n\n  const {\n    gameField,\n    turn\n  } = useSelector(store => store.chess);\n  let [x2, y2] = useKingCoordinates(turn + 'K');\n  let [x1, y1] = piece;\n  let pinK = true;\n  let pinF = false;\n\n  if ((x1 === x2 || y1 === y2 || Math.abs(x2 - x1) === Math.abs(y2 - y1)) && !(x1 === x2 && y1 === y2)) {\n    let kX = x1 > x2 ? -1 : x1 < x2 ? 1 : 0;\n    let kY = y1 > y2 ? -1 : y1 < y2 ? 1 : 0;\n\n    for (let i = 1; i * kX + x1 !== x2 || i * kY + y1 !== y2; i++) {\n      if (gameField[y1 + i * kY][x1 + i * kX] !== '0') {\n        pinK = false;\n        break;\n      }\n    }\n\n    let color = turns[turn];\n\n    for (let i = 1; i * -kX + x1 < 8 && i * -kX + x1 >= 0 && i * -kY + y1 < 8 && i * -kY + y1 >= 0; i++) {\n      let [x, y] = [x1 + i * -kX, y1 + i * -kY];\n      let piece = gameField[y][x];\n\n      if (color + 'Q' === piece) {\n        pinF = true;\n      } else if (color + 'R' === piece && (kX === 0 || kY === 0)) {\n        pinF = true;\n      } else if (color + 'B' === piece && kX !== 0 && kY !== 0) {\n        pinF = true;\n      }\n\n      if (piece !== '0') break;\n    }\n  }\n\n  return pinF && pinK;\n}\n\n_s(usePieceIsPinned, \"2wt3lZnihDx6GNjVNFg3r99zKlc=\", false, function () {\n  return [useSelector, useKingCoordinates];\n});","map":{"version":3,"names":["turns","useKingCoordinates","useSelector","usePieceIsPinned","gameField","turn","store","chess","x2","y2","x1","y1","piece","pinK","pinF","Math","abs","kX","kY","i","color","x","y"],"sources":["C:/Users/alapc/OneDrive/Documents/Programming/chess/src/Chessboard/Game/Pieces/Logic/Next moves/Check for pin.js"],"sourcesContent":["import { turns } from '../Move piece/Move piece'\r\nimport useKingCoordinates from '../King activity/Find king'\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport default function usePieceIsPinned() {\r\n\tconst { gameField, turn } = useSelector((store) => store.chess)\r\n\tlet [x2, y2] = useKingCoordinates(turn + 'K')\r\n\r\n\r\n\tlet [x1, y1] = piece\r\n\tlet pinK = true\r\n\tlet pinF = false\r\n\r\n\tif (\r\n\t\t(x1 === x2 || y1 === y2 || Math.abs(x2 - x1) === Math.abs(y2 - y1)) &&\r\n\t\t!(x1 === x2 && y1 === y2)\r\n\t) {\r\n\t\tlet kX = x1 > x2 ? -1 : x1 < x2 ? 1 : 0\r\n\t\tlet kY = y1 > y2 ? -1 : y1 < y2 ? 1 : 0\r\n\r\n\t\tfor (let i = 1; i * kX + x1 !== x2 || i * kY + y1 !== y2; i++) {\r\n\t\t\tif (gameField[y1 + i * kY][x1 + i * kX] !== '0') {\r\n\t\t\t\tpinK = false\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet color = turns[turn]\r\n\r\n\t\tfor (\r\n\t\t\tlet i = 1;\r\n\t\t\ti * -kX + x1 < 8 &&\r\n\t\t\ti * -kX + x1 >= 0 &&\r\n\t\t\ti * -kY + y1 < 8 &&\r\n\t\t\ti * -kY + y1 >= 0;\r\n\t\t\ti++\r\n\t\t) {\r\n\t\t\tlet [x, y] = [x1 + i * -kX, y1 + i * -kY]\r\n\t\t\tlet piece = gameField[y][x]\r\n\r\n\t\t\tif (color + 'Q' === piece) {\r\n\t\t\t\tpinF = true\r\n\t\t\t} else if (color + 'R' === piece && (kX === 0 || kY === 0)) {\r\n\t\t\t\tpinF = true\r\n\t\t\t} else if (color + 'B' === piece && kX !== 0 && kY !== 0) {\r\n\t\t\t\tpinF = true\r\n\t\t\t}\r\n\r\n\t\t\tif (piece !== '0') break\r\n\t\t}\r\n\t}\r\n\treturn pinF && pinK\r\n}\r\n"],"mappings":";;AAAA,SAASA,KAAT,QAAsB,0BAAtB;AACA,OAAOC,kBAAP,MAA+B,4BAA/B;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,eAAe,SAASC,gBAAT,GAA4B;EAAA;;EAC1C,MAAM;IAAEC,SAAF;IAAaC;EAAb,IAAsBH,WAAW,CAAEI,KAAD,IAAWA,KAAK,CAACC,KAAlB,CAAvC;EACA,IAAI,CAACC,EAAD,EAAKC,EAAL,IAAWR,kBAAkB,CAACI,IAAI,GAAG,GAAR,CAAjC;EAGA,IAAI,CAACK,EAAD,EAAKC,EAAL,IAAWC,KAAf;EACA,IAAIC,IAAI,GAAG,IAAX;EACA,IAAIC,IAAI,GAAG,KAAX;;EAEA,IACC,CAACJ,EAAE,KAAKF,EAAP,IAAaG,EAAE,KAAKF,EAApB,IAA0BM,IAAI,CAACC,GAAL,CAASR,EAAE,GAAGE,EAAd,MAAsBK,IAAI,CAACC,GAAL,CAASP,EAAE,GAAGE,EAAd,CAAjD,KACA,EAAED,EAAE,KAAKF,EAAP,IAAaG,EAAE,KAAKF,EAAtB,CAFD,EAGE;IACD,IAAIQ,EAAE,GAAGP,EAAE,GAAGF,EAAL,GAAU,CAAC,CAAX,GAAeE,EAAE,GAAGF,EAAL,GAAU,CAAV,GAAc,CAAtC;IACA,IAAIU,EAAE,GAAGP,EAAE,GAAGF,EAAL,GAAU,CAAC,CAAX,GAAeE,EAAE,GAAGF,EAAL,GAAU,CAAV,GAAc,CAAtC;;IAEA,KAAK,IAAIU,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,EAAJ,GAASP,EAAT,KAAgBF,EAAhB,IAAsBW,CAAC,GAAGD,EAAJ,GAASP,EAAT,KAAgBF,EAAtD,EAA0DU,CAAC,EAA3D,EAA+D;MAC9D,IAAIf,SAAS,CAACO,EAAE,GAAGQ,CAAC,GAAGD,EAAV,CAAT,CAAuBR,EAAE,GAAGS,CAAC,GAAGF,EAAhC,MAAwC,GAA5C,EAAiD;QAChDJ,IAAI,GAAG,KAAP;QACA;MACA;IACD;;IAED,IAAIO,KAAK,GAAGpB,KAAK,CAACK,IAAD,CAAjB;;IAEA,KACC,IAAIc,CAAC,GAAG,CADT,EAECA,CAAC,GAAG,CAACF,EAAL,GAAUP,EAAV,GAAe,CAAf,IACAS,CAAC,GAAG,CAACF,EAAL,GAAUP,EAAV,IAAgB,CADhB,IAEAS,CAAC,GAAG,CAACD,EAAL,GAAUP,EAAV,GAAe,CAFf,IAGAQ,CAAC,GAAG,CAACD,EAAL,GAAUP,EAAV,IAAgB,CALjB,EAMCQ,CAAC,EANF,EAOE;MACD,IAAI,CAACE,CAAD,EAAIC,CAAJ,IAAS,CAACZ,EAAE,GAAGS,CAAC,GAAG,CAACF,EAAX,EAAeN,EAAE,GAAGQ,CAAC,GAAG,CAACD,EAAzB,CAAb;MACA,IAAIN,KAAK,GAAGR,SAAS,CAACkB,CAAD,CAAT,CAAaD,CAAb,CAAZ;;MAEA,IAAID,KAAK,GAAG,GAAR,KAAgBR,KAApB,EAA2B;QAC1BE,IAAI,GAAG,IAAP;MACA,CAFD,MAEO,IAAIM,KAAK,GAAG,GAAR,KAAgBR,KAAhB,KAA0BK,EAAE,KAAK,CAAP,IAAYC,EAAE,KAAK,CAA7C,CAAJ,EAAqD;QAC3DJ,IAAI,GAAG,IAAP;MACA,CAFM,MAEA,IAAIM,KAAK,GAAG,GAAR,KAAgBR,KAAhB,IAAyBK,EAAE,KAAK,CAAhC,IAAqCC,EAAE,KAAK,CAAhD,EAAmD;QACzDJ,IAAI,GAAG,IAAP;MACA;;MAED,IAAIF,KAAK,KAAK,GAAd,EAAmB;IACnB;EACD;;EACD,OAAOE,IAAI,IAAID,IAAf;AACA;;GAhDuBV,gB;UACKD,W,EACbD,kB"},"metadata":{},"sourceType":"module"}