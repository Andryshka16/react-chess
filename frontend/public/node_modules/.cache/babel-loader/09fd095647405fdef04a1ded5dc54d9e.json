{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alapc\\\\OneDrive\\\\Documents\\\\Programming\\\\chess\\\\src\\\\Components\\\\Chessboard\\\\Components\\\\Pieces\\\\piece.js\",\n    _s = $RefreshSig$();\n\nimport { useNextMovesInclude } from './Logic/Next moves/NextMoves';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { movePiece, setNextMoves, setSelected } from '../../../../features/chess/chessSlice';\nimport useGetNextMoves from './Logic/Next moves/NextMoves';\nimport useStartDragging from './Start dragging';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Piece(_ref) {\n  _s();\n\n  let {\n    x,\n    y\n  } = _ref;\n  const {\n    gameField,\n    turn\n  } = useSelector(store => store.chess);\n  const dispatch = useDispatch();\n  const getNextMoves = useGetNextMoves();\n  const nextMovesArray = getNextMoves(x, y);\n  const startFollowing = useStartDragging(nextMovesArray, x, y);\n  const nextMovesInclude = useNextMovesInclude();\n  const name = gameField[y][x];\n  let scales = {\n    P: 0.6,\n    B: 0.8,\n    Q: 0.85,\n    K: 0.8\n  };\n  let marginTop = {\n    P: '-8px',\n    Q: '3px',\n    R: '-3px',\n    N: '-3px'\n  };\n  let scale = scales[name[1]] || 0.7;\n  let styles = {\n    top: `${y * 80}px`,\n    left: `${x * 80}px`,\n    transform: `scale(${scale})`,\n    marginTop: marginTop[name[1]],\n    pointerEvents: !nextMovesArray.length || name[0] !== turn || !nextMovesInclude([x, y]) ? 'none' : 'all'\n  };\n\n  function handleMouseOver(event) {\n    event.target.style.transform = `scale(${scale * 1.2})`;\n  }\n\n  function handleMouseOut(event) {\n    event.target.style.transform = `scale(${scale})`;\n  }\n\n  function handleMouseClick(event) {\n    if (event.button !== 0) return;\n\n    if (name[0] === turn && !nextMovesInclude([x, y])) {\n      dispatch(setNextMoves(nextMovesArray));\n      dispatch(setSelected({\n        x1: x,\n        y1: y,\n        name\n      }));\n      if (nextMovesArray.length) startFollowing(event);\n    } else if (nextMovesInclude([x, y])) {\n      dispatch(movePiece([x, y]));\n    } else {\n      dispatch(setNextMoves([]));\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"img\", {\n    src: `./images/${name}.png`,\n    alt: 'failed',\n    className: 'piece',\n    style: styles,\n    onMouseOver: handleMouseOver,\n    onMouseOut: handleMouseOut,\n    onMouseDown: handleMouseClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Piece, \"WFnSUOLZlUHpP56IrBUmclg3IwU=\", false, function () {\n  return [useSelector, useDispatch, useGetNextMoves, useStartDragging, useNextMovesInclude];\n});\n\n_c = Piece;\n\nvar _c;\n\n$RefreshReg$(_c, \"Piece\");","map":{"version":3,"names":["useNextMovesInclude","useDispatch","useSelector","movePiece","setNextMoves","setSelected","useGetNextMoves","useStartDragging","Piece","x","y","gameField","turn","store","chess","dispatch","getNextMoves","nextMovesArray","startFollowing","nextMovesInclude","name","scales","P","B","Q","K","marginTop","R","N","scale","styles","top","left","transform","pointerEvents","length","handleMouseOver","event","target","style","handleMouseOut","handleMouseClick","button","x1","y1"],"sources":["C:/Users/alapc/OneDrive/Documents/Programming/chess/src/Components/Chessboard/Components/Pieces/piece.js"],"sourcesContent":["import { useNextMovesInclude } from './Logic/Next moves/NextMoves'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport {\r\n    movePiece,\r\n    setNextMoves,\r\n    setSelected\r\n} from '../../../../features/chess/chessSlice'\r\nimport useGetNextMoves from './Logic/Next moves/NextMoves'\r\nimport useStartDragging from './Start dragging'\r\n\r\nexport default function Piece({ x, y }) {\r\n    const { gameField, turn } = useSelector((store) => store.chess)\r\n    const dispatch = useDispatch()\r\n    const getNextMoves = useGetNextMoves()\r\n    const nextMovesArray = getNextMoves(x, y)\r\n    const startFollowing = useStartDragging(nextMovesArray, x, y)\r\n    const nextMovesInclude = useNextMovesInclude()\r\n\r\n    const name = gameField[y][x]\r\n\r\n    let scales = {\r\n        P: 0.6,\r\n        B: 0.8,\r\n        Q: 0.85,\r\n        K: 0.8\r\n    }\r\n\r\n    let marginTop = {\r\n        P: '-8px',\r\n        Q: '3px',\r\n        R: '-3px',\r\n        N: '-3px'\r\n    }\r\n\r\n    let scale = scales[name[1]] || 0.7\r\n\r\n    let styles = {\r\n        top: `${y * 80}px`,\r\n        left: `${x * 80}px`,\r\n        transform: `scale(${scale})`,\r\n        marginTop: marginTop[name[1]],\r\n        pointerEvents:!nextMovesArray.length ||\r\n            name[0] !== turn ||\r\n            (\r\n            !nextMovesInclude([x, y]))\r\n                ? 'none'\r\n                : 'all'\r\n    }\r\n\r\n    function handleMouseOver(event) {\r\n        event.target.style.transform = `scale(${scale * 1.2})`\r\n    }\r\n\r\n    function handleMouseOut(event) {\r\n        event.target.style.transform = `scale(${scale})`\r\n    }\r\n\r\n    function handleMouseClick(event) {\r\n        if (event.button !== 0) return\r\n\r\n        if (name[0] === turn && !nextMovesInclude([x, y])) {\r\n            dispatch(setNextMoves(nextMovesArray))\r\n            dispatch(setSelected({ x1: x, y1: y, name }))\r\n            if (nextMovesArray.length) startFollowing(event)\r\n        } else if (nextMovesInclude([x, y])) {\r\n            dispatch(movePiece([x, y]))\r\n        } else {\r\n            dispatch(setNextMoves([]))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <img\r\n            src={`./images/${name}.png`}\r\n            alt={'failed'}\r\n            className={'piece'}\r\n            style={styles}\r\n            onMouseOver={handleMouseOver}\r\n            onMouseOut={handleMouseOut}\r\n            onMouseDown={handleMouseClick}\r\n        ></img>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}