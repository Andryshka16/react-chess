{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { turns } from \"../Move piece/Move piece\";\nimport useKingCoordinates from \"../King activity/Find king\";\nimport { useSelector } from 'react-redux';\nexport default function usePieceIsPinned(piece) {\n  _s();\n\n  const {\n    gameField,\n    turn\n  } = useSelector(store => store.chess);\n  let [x1, y1] = piece;\n  let [x2, y2] = useKingCoordinates(turn + \"K\");\n  let pinK = true;\n  let pinF = false;\n\n  if ((x1 === x2 || y1 === y2 || Math.abs(x2 - x1) === Math.abs(y2 - y1)) && !(x1 === x2 && y1 === y2)) {\n    let kX = x1 > x2 ? -1 : x1 < x2 ? 1 : 0;\n    let kY = y1 > y2 ? -1 : y1 < y2 ? 1 : 0;\n\n    for (let i = 1; i * kX + x1 !== x2 || i * kY + y1 !== y2; i++) {\n      if (gameField[y1 + i * kY][x1 + i * kX] !== \"0\") {\n        pinK = false;\n        break;\n      }\n    }\n\n    let color = turns[turn];\n\n    for (let i = 1; i * -kX + x1 < 8 && i * -kX + x1 >= 0 && i * -kY + y1 < 8 && i * -kY + y1 >= 0; i++) {\n      let [x, y] = [x1 + i * -kX, y1 + i * -kY];\n      let piece = gameField[y][x];\n\n      if (color + \"Q\" === piece) {\n        pinF = true;\n      } else if (color + \"R\" === piece && (kX === 0 || kY === 0)) {\n        pinF = true;\n      } else if (color + \"B\" === piece && kX !== 0 && kY !== 0) {\n        pinF = true;\n      }\n\n      if (piece !== \"0\") break;\n    }\n  }\n\n  return pinF && pinK;\n}\n\n_s(usePieceIsPinned, \"2wt3lZnihDx6GNjVNFg3r99zKlc=\", false, function () {\n  return [useSelector, useKingCoordinates];\n});","map":{"version":3,"names":["turns","useKingCoordinates","useSelector","usePieceIsPinned","piece","gameField","turn","store","chess","x1","y1","x2","y2","pinK","pinF","Math","abs","kX","kY","i","color","x","y"],"sources":["C:/Users/alapc/OneDrive/Documents/Programming/chess/src/Chessboard/Game/Pieces/Logic/Next moves/Check for pin.js"],"sourcesContent":["import { turns} from \"../Move piece/Move piece\";\r\nimport useKingCoordinates from \"../King activity/Find king\";\r\nimport { useSelector } from 'react-redux';\r\n\r\nexport default function usePieceIsPinned(piece){\r\n\r\n    const { gameField, turn } = useSelector(store => store.chess)\r\n\r\n    let [x1, y1] = piece\r\n    let [x2, y2] = useKingCoordinates(turn + \"K\")\r\n\r\n    let pinK = true\r\n    let pinF = false\r\n\r\n    if ((x1===x2 || y1===y2 || Math.abs(x2-x1) === Math.abs(y2-y1)) && !(x1 === x2 && y1 === y2)){\r\n\r\n        let kX = x1 > x2? -1 : (x1 < x2? 1 : 0)\r\n        let kY = y1 > y2? -1 : (y1 < y2? 1 : 0)\r\n\r\n        for (let i = 1; i * kX + x1 !== x2 ||\r\n                        i * kY + y1 !== y2; i++){\r\n\r\n            if (gameField[y1+i*kY][x1+i*kX] !== \"0\"){\r\n                pinK = false\r\n                break\r\n            }\r\n        }\r\n\r\n        let color = turns[turn]\r\n\r\n        for (let i = 1; i * -kX + x1 < 8 && i * -kX + x1 >= 0 &&\r\n                        i * -kY + y1 < 8 && i * -kY + y1 >= 0; i++) {\r\n\r\n            let [x,y] = [x1 + i * -kX, y1 + i * -kY]\r\n            let piece = gameField[y][x]\r\n\r\n            if (color + \"Q\" === piece) {\r\n                pinF = true\r\n            }\r\n\r\n            else if (color + \"R\" === piece && (kX === 0 || kY === 0)) {\r\n                pinF = true\r\n            }\r\n\r\n            else if (color + \"B\" === piece && (kX !== 0 && kY !== 0)) {\r\n                pinF = true\r\n            }\r\n\r\n            if (piece !== \"0\") break\r\n        }\r\n    }\r\n    return pinF && pinK\r\n}"],"mappings":";;AAAA,SAASA,KAAT,QAAqB,0BAArB;AACA,OAAOC,kBAAP,MAA+B,4BAA/B;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,eAAe,SAASC,gBAAT,CAA0BC,KAA1B,EAAgC;EAAA;;EAE3C,MAAM;IAAEC,SAAF;IAAaC;EAAb,IAAsBJ,WAAW,CAACK,KAAK,IAAIA,KAAK,CAACC,KAAhB,CAAvC;EAEA,IAAI,CAACC,EAAD,EAAKC,EAAL,IAAWN,KAAf;EACA,IAAI,CAACO,EAAD,EAAKC,EAAL,IAAWX,kBAAkB,CAACK,IAAI,GAAG,GAAR,CAAjC;EAEA,IAAIO,IAAI,GAAG,IAAX;EACA,IAAIC,IAAI,GAAG,KAAX;;EAEA,IAAI,CAACL,EAAE,KAAGE,EAAL,IAAWD,EAAE,KAAGE,EAAhB,IAAsBG,IAAI,CAACC,GAAL,CAASL,EAAE,GAACF,EAAZ,MAAoBM,IAAI,CAACC,GAAL,CAASJ,EAAE,GAACF,EAAZ,CAA3C,KAA+D,EAAED,EAAE,KAAKE,EAAP,IAAaD,EAAE,KAAKE,EAAtB,CAAnE,EAA6F;IAEzF,IAAIK,EAAE,GAAGR,EAAE,GAAGE,EAAL,GAAS,CAAC,CAAV,GAAeF,EAAE,GAAGE,EAAL,GAAS,CAAT,GAAa,CAArC;IACA,IAAIO,EAAE,GAAGR,EAAE,GAAGE,EAAL,GAAS,CAAC,CAAV,GAAeF,EAAE,GAAGE,EAAL,GAAS,CAAT,GAAa,CAArC;;IAEA,KAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,EAAJ,GAASR,EAAT,KAAgBE,EAAhB,IACAQ,CAAC,GAAGD,EAAJ,GAASR,EAAT,KAAgBE,EADhC,EACoCO,CAAC,EADrC,EACwC;MAEpC,IAAId,SAAS,CAACK,EAAE,GAACS,CAAC,GAACD,EAAN,CAAT,CAAmBT,EAAE,GAACU,CAAC,GAACF,EAAxB,MAAgC,GAApC,EAAwC;QACpCJ,IAAI,GAAG,KAAP;QACA;MACH;IACJ;;IAED,IAAIO,KAAK,GAAGpB,KAAK,CAACM,IAAD,CAAjB;;IAEA,KAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAACF,EAAL,GAAUR,EAAV,GAAe,CAAf,IAAoBU,CAAC,GAAG,CAACF,EAAL,GAAUR,EAAV,IAAgB,CAApC,IACAU,CAAC,GAAG,CAACD,EAAL,GAAUR,EAAV,GAAe,CADf,IACoBS,CAAC,GAAG,CAACD,EAAL,GAAUR,EAAV,IAAgB,CADpD,EACuDS,CAAC,EADxD,EAC4D;MAExD,IAAI,CAACE,CAAD,EAAGC,CAAH,IAAQ,CAACb,EAAE,GAAGU,CAAC,GAAG,CAACF,EAAX,EAAeP,EAAE,GAAGS,CAAC,GAAG,CAACD,EAAzB,CAAZ;MACA,IAAId,KAAK,GAAGC,SAAS,CAACiB,CAAD,CAAT,CAAaD,CAAb,CAAZ;;MAEA,IAAID,KAAK,GAAG,GAAR,KAAgBhB,KAApB,EAA2B;QACvBU,IAAI,GAAG,IAAP;MACH,CAFD,MAIK,IAAIM,KAAK,GAAG,GAAR,KAAgBhB,KAAhB,KAA0Ba,EAAE,KAAK,CAAP,IAAYC,EAAE,KAAK,CAA7C,CAAJ,EAAqD;QACtDJ,IAAI,GAAG,IAAP;MACH,CAFI,MAIA,IAAIM,KAAK,GAAG,GAAR,KAAgBhB,KAAhB,IAA0Ba,EAAE,KAAK,CAAP,IAAYC,EAAE,KAAK,CAAjD,EAAqD;QACtDJ,IAAI,GAAG,IAAP;MACH;;MAED,IAAIV,KAAK,KAAK,GAAd,EAAmB;IACtB;EACJ;;EACD,OAAOU,IAAI,IAAID,IAAf;AACH;;GAhDuBV,gB;UAEQD,W,EAGbD,kB"},"metadata":{},"sourceType":"module"}